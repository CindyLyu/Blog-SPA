(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{165:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(24),c=a.n(o),r=a(26),i=a(25),s=a(11),u=a(12),m=a(13),d=a(15),p=a(14),b=a(16),h=(a(66),a(17)),g=a(67),f="https://qootest.com/posts/",E=function(e){return g.get("".concat(f).concat(e))},v=function(e,t,a,n){return g.put("".concat(f).concat(e),{title:t,author:a,body:n})},_=function(e){return g.delete("".concat(f).concat(e))},y=function(e,t,a){return g.post("https://qootest.com/posts",{title:e,author:t,body:a})},N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={post:[]},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.get(f).then((function(t){return e.setState({post:t.data.reverse()})}))}},{key:"render",value:function(){var e=this.state.post,t=this.props.history;return l.a.createElement(s.a,null,l.a.createElement("img",{className:"blog__list-img",src:a(85),alt:"substitute"}),l.a.createElement("section",{className:"blog__list"},l.a.createElement("div",{className:"blog__list-title"},l.a.createElement("span",{className:"fas fa-list-ul"}),"\u6587\u7ae0\u5217\u8868"),e.map((function(e){return l.a.createElement("div",{className:"blog__list-body",key:e.id,onClick:function(){t.push("/post/".concat(e.id))}},l.a.createElement("div",{className:"blog__list-body-title"},e.title),l.a.createElement("div",{className:"blog__list-body-line"}),l.a.createElement("div",{className:"blog__list-body-content"},e.body),l.a.createElement("div",{className:"blog__list-readmore"},"Read more"))}))))}}]),t}(n.Component),O=Object(h.f)(N),j=a(21),C=a(56),w=a.n(C);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleEditSwitch=function(e){var t=a.state,n=t.post,l=t.isEdit;"cancel"===e&&E(n.id).then((function(e){return a.setState({post:e.data})})),a.setState({isEdit:!l})},a.handleDelete=function(){var e=a.props.history,t=a.state.post;window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u55ce")&&_(t.id).then((function(){alert("\u522a\u9664\u6210\u529f"),e.push("/post")})).catch((function(e){alert("\u522a\u9664\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.log(e)}))},a.handleInputChange=function(e){var t=a.state.post,n=e.target.value,l=e.target.name;a.setState({post:P({},t,Object(j.a)({},l,n))})},a.handleEditSubmit=function(e){e.preventDefault();var t=a.state.post;v(t.id,t.title,t.author,t.body).catch((function(e){alert("\u66f4\u65b0\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.log(e)})),a.setState({isEdit:!1})},a.state={post:[],isEdit:!1},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.history.location.pathname.replace("/post/","");E(t).then((function(t){return e.setState({post:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.post,o=t.isEdit;return l.a.createElement(n.Fragment,null,l.a.createElement("img",{className:"blog__article-img",src:"https://fakeimg.pl/1600x600/dbdbdb/?text=picture&font=bebas",alt:"substitute"}),l.a.createElement("section",{className:"blog__article"},l.a.createElement("div",{className:"blog__article-action"},o?l.a.createElement("a",{className:"blog__article-canceledit",onClick:function(){return e.handleEditSwitch("cancel")}},"\u53d6\u6d88\u7de8\u8f2f"):l.a.createElement("div",null,l.a.createElement("button",{className:"blog__article-edit",onClick:this.handleEditSwitch},l.a.createElement("i",{className:"far fa-edit"}),"\u7de8\u8f2f"),l.a.createElement("button",{className:"blog__article-delete",onClick:this.handleDelete},l.a.createElement("i",{className:"far fa-trash-alt"}),"\u522a\u9664"))),o?l.a.createElement("div",null,"\u6a19\u984c\uff1a",l.a.createElement("input",{className:"blog__article-edittitle",name:"title",value:a.title,onChange:this.handleInputChange})):l.a.createElement("div",{className:"blog__article-title"},a.title?a.title:"Loading..."),o?l.a.createElement("div",null,"\u4f5c\u8005\uff1a",l.a.createElement("input",{className:"blog__article-editauthor",name:"author",value:a.author,onChange:this.handleInputChange})):l.a.createElement("div",{className:"blog__article-author"},l.a.createElement("i",{className:"fas fa-user"}),a.author?a.author:"\u533f\u540d"),o?l.a.createElement("div",null,"\u5167\u5bb9\uff1a",l.a.createElement("textarea",{className:"blog__article-editbody",name:"body",value:a.body,onChange:this.handleInputChange})):l.a.createElement("div",{className:"blog__article-body"},l.a.createElement(w.a,{source:a.body})),o?l.a.createElement("button",{className:"blog__article-editsubmit",type:"submit",onClick:this.handleEditSubmit},"\u9001\u51fa"):null))}}]),t}(n.Component),I=Object(h.f)(S);var x=function(){return l.a.createElement(n.Fragment,null,l.a.createElement("section",{className:"blog__about"},l.a.createElement("img",{className:"blog__about-img",src:"https://fakeimg.pl/1200x1200/dbdbdb/?text=picture&font=bebas",alt:"station"}),l.a.createElement("div",{className:"blog__about-content"},"\u54e9\u5f8c\uff0c\u95dc\u65bc\u6211\u95dc\u65bc\u6211\u95dc\u65bc\u6211\u7518\u9b5a\u6211")))},D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(j.a)({},n,t))},a.handleSubmit=function(e){e.preventDefault();var t=a.props.history,n=a.state,l=n.title,o=n.author,c=n.body;y(l,o,c).then((function(){alert("\u65b0\u589e\u6210\u529f"),t.push("/post")})).catch((function(e){alert("\u65b0\u589e\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.log(e)}))},a.state={title:"",author:"",body:""},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.author,o=e.body;return l.a.createElement(n.Fragment,null,l.a.createElement("form",{className:"blog__addpost",method:"POST"},l.a.createElement("div",{className:"blog__addpost-title"},l.a.createElement("i",{className:"far fa-plus-square"}),"\u65b0\u589e\u6587\u7ae0"),l.a.createElement("div",null,"\u6a19\u984c\uff1a",l.a.createElement("input",{className:"blog__addpost-articletitle",placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",name:"title",value:t,onChange:this.handleInputChange})),l.a.createElement("div",null,"\u4f5c\u8005\uff1a",l.a.createElement("input",{className:"blog__addpost-author",placeholder:"\u8f38\u5165\u4f60\u7684\u5927\u540d",name:"author",value:a,onChange:this.handleInputChange})),l.a.createElement("div",null,"\u5167\u5bb9\uff1a",l.a.createElement("textarea",{className:"blog__addpost-body",placeholder:"\u6587\u7ae0\u5167\u5bb9",name:"body",value:o,onChange:this.handleInputChange})),l.a.createElement("br",null),l.a.createElement("button",{className:"blog__addpost-submit",type:"submit",onClick:this.handleSubmit},"\u9001\u51fa")))}}]),t}(n.Component),A=Object(h.f)(D),G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).handleChangePage=function(e){a.props.updatePage(e)},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.page;return l.a.createElement(s.a,{basename:"Blog-SPA"},l.a.createElement("main",{className:"blog"},l.a.createElement("nav",{className:"blog__nav"},l.a.createElement("div",{className:"blog__nav-name",onClick:function(){return e.handleChangePage("home")}},"LYU"),l.a.createElement("div",{className:"blog__nav-about",onClick:function(){return e.handleChangePage("about")}},"About"),l.a.createElement("div",{className:"blog__nav-list",onClick:function(){return e.handleChangePage("list")}},"List"),l.a.createElement("div",{className:"blog__nav-addpost",onClick:function(){return e.handleChangePage("addPost")}},"Add Post")),l.a.createElement(h.b,{exact:!0,path:"/",component:O}),l.a.createElement(h.b,{exact:!0,path:"/post",component:O}),l.a.createElement(h.b,{path:"/about",component:x}),l.a.createElement(h.b,{path:"/post/:postId",render:function(){return l.a.createElement(I,{updataState:e.updateState})}}),l.a.createElement(h.b,{path:"/addpost",component:A}),"home"===t?l.a.createElement(h.a,{to:"/"}):null,"list"===t?l.a.createElement(h.a,{to:"/post"}):null,"about"===t?l.a.createElement(h.a,{to:"/about"}):null,"addPost"===t?l.a.createElement(h.a,{to:"/addpost"}):null))}}]),t}(n.Component),q=Object(r.b)((function(e){return{page:e.page}}),(function(e){return{updatePage:function(t){return e({type:"CHANGE_PAGE",page:t})}}}))(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B={page:window.localStorage.getItem("store")||"home"},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_PAGE":return{page:t.page};case"CHANGE_PAGE":return window.localStorage.setItem("store",t.page),{page:t.page};default:return e}},L=Object(i.b)(F);c.a.render(l.a.createElement(r.a,{store:L},l.a.createElement(s.a,null,l.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},57:function(e,t,a){e.exports=a(165)},66:function(e,t,a){},85:function(e,t,a){e.exports=a.p+"static/media/background-image.81b52042.jpg"}},[[57,1,2]]]);
//# sourceMappingURL=main.699586c5.chunk.js.map