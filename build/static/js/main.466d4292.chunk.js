(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{201:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(30),s=a.n(r),i=a(17),l=a(25),c=a(65),u=a(66),d=a.n(u),p=a(11),m=a(12),b=a(14),g=a(13),E=a(15),h=(a(80),a(8)),_=a(18),f=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getPostList)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.isLoadingGetPostList,n=t.error;e.isLoadingGetPostList===a||a||n&&alert("\u8b80\u53d6\u8cc7\u6599\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.postList;return o.a.createElement(h.a,null,o.a.createElement("img",{className:"blog__list-img",src:a(82),alt:"substitute"}),o.a.createElement("section",{className:"blog__list"},o.a.createElement("div",{className:"blog__list-title"},o.a.createElement("span",{className:"fas fa-list-ul"}),"\u6587\u7ae0\u5217\u8868"),n.map((function(e){return o.a.createElement("div",{className:"blog__list-body",key:e.id,onClick:function(){t.push("/post/".concat(e.id))}},o.a.createElement("div",{className:"blog__list-body-title"},e.title),o.a.createElement("div",{className:"blog__list-body-line"}),o.a.createElement("div",{className:"blog__list-body-content"},e.body),o.a.createElement("div",{className:"blog__list-readmore"},"Read more"))}))))}}]),t}(n.Component),P=a(83).create({baseURL:"https://qootest.com/posts/"}),O=function(e,t,a,n){return P.put("".concat(e),{title:t,author:a,body:n})},v=function(e,t,a){return P.post("/",{title:e,author:t,body:a})},y=Object(_.e)(Object(i.b)((function(e){return{isLoadingGetPostList:e.isLoadingGetPostList,postList:e.postList,error:e.error}}),(function(e){return{getPostList:function(){e({type:"GET_POST_LIST",payload:P.get("?_sort=id&_order=desc")})}}}))((function(e){return o.a.createElement(f,e)}))),L=a(19),j=a(68),N=a.n(j),D=a(205),T=a(204),S=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.language,a=e.value;return o.a.createElement("figure",{className:"highlight"},o.a.createElement(D.a,{language:t,style:T.a},a))}}]),t}(n.PureComponent);S.defaultProps={language:null};var C=S;function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(L.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleEditSwitch=function(e){var t=a.state.isEdit,n=a.props,o=n.post;(0,n.getPost)(o.id),"cancel"===e&&a.setState({post:o}),a.setState({isEdit:!t})},a.handleDelete=function(){var e=a.props,t=e.post,n=e.deletePost;window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u55ce")&&n(t.id)},a.handleInputChange=function(e){var t=a.state.post,n=e.target,o=n.value,r=n.name;a.setState({post:w({},t,Object(L.a)({},r,o))})},a.handleEditSubmit=function(e){e.preventDefault();var t=a.state.post;(0,a.props.updatePost)(t.id,t.title,t.author,t.body)},a.state={post:[],isEdit:!1},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.post;(0,e.getPost)(t.params.postId),this.setState({post:a})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.history,n=t.error,o=t.isLoadingDeletePost,r=t.isLoadingUpdatePost,s=t.post;e.post!==s&&this.setState({post:s}),e.isLoadingDeletePost===o||o||(n?alert("\u522a\u9664\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"):(a.push("/post"),alert("\u522a\u9664\u6210\u529f"))),e.isLoadingUpdatePost===r||r||(n?alert("\u66f4\u65b0\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"):this.setState({isEdit:!1}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEdit,r=t.post;return o.a.createElement(n.Fragment,null,o.a.createElement("img",{className:"blog__article-img",src:"https://fakeimg.pl/1600x600/dbdbdb/?text=picture&font=bebas",alt:"substitute"}),o.a.createElement("section",{className:"blog__article"},o.a.createElement("div",{className:"blog__article-action"},a?o.a.createElement("button",{className:"blog__article-canceledit",onClick:function(){return e.handleEditSwitch("cancel")}},"\u53d6\u6d88\u7de8\u8f2f"):o.a.createElement("div",null,o.a.createElement("button",{className:"blog__article-edit",onClick:this.handleEditSwitch},o.a.createElement("i",{className:"far fa-edit"}),"\u7de8\u8f2f"),o.a.createElement("button",{className:"blog__article-delete",onClick:this.handleDelete},o.a.createElement("i",{className:"far fa-trash-alt"}),"\u522a\u9664"))),a?o.a.createElement(n.Fragment,null,o.a.createElement("div",null,"\u6a19\u984c\uff1a",o.a.createElement("input",{className:"blog__article-edittitle",name:"title",value:r.title,onChange:this.handleInputChange})),o.a.createElement("div",null,"\u4f5c\u8005\uff1a",o.a.createElement("input",{className:"blog__article-editauthor",name:"author",value:r.author,onChange:this.handleInputChange})),o.a.createElement("div",null,"\u5167\u5bb9\uff1a",o.a.createElement("textarea",{className:"blog__article-editbody",name:"body",value:r.body,onChange:this.handleInputChange})),o.a.createElement("button",{className:"blog__article-editsubmit",type:"submit",onClick:this.handleEditSubmit},"\u9001\u51fa")):o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"blog__article-title"},r.title?r.title:"Loading..."),o.a.createElement("div",{className:"blog__article-author"},o.a.createElement("i",{className:"fas fa-user"}),r.author?r.author:"\u533f\u540d"),o.a.createElement("div",{className:"blog__article-body"},o.a.createElement(N.a,{source:r.body,renderers:{code:C}})))))}}]),t}(n.Component),I=Object(_.e)(Object(i.b)((function(e){return{isLoadingGetPost:e.isLoadingGetPost,isLoadingDeletePost:e.isLoadingDeletePost,isLoadingUpdatePost:e.isLoadingUpdatePost,post:e.post,error:e.error}}),(function(e){return{getPost:function(t){e(function(e){return{type:"GET_POST",payload:(t=e,P.get("".concat(t)))};var t}(t))},deletePost:function(t){e(function(e){return{type:"DELETE_POST",payload:(t=e,P.delete("".concat(t)))};var t}(t))},updatePost:function(t,a,n,o){e(function(e,t,a,n){return{type:"UPDATE_POST",payload:O(e,t,a,n)}}(t,a,n,o))}}}))((function(e){return o.a.createElement(G,e)})));var U=function(){return o.a.createElement(n.Fragment,null,o.a.createElement("section",{className:"blog__about"},o.a.createElement("img",{className:"blog__about-img",src:"https://fakeimg.pl/1200x1200/dbdbdb/?text=picture&font=bebas",alt:"station"}),o.a.createElement("div",{className:"blog__about-content"},"\u54e9\u5f8c\uff0c\u95dc\u65bc\u6211\u95dc\u65bc\u6211\u95dc\u65bc\u6211\u7518\u9b5a\u6211")))},F=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(L.a)({},n,t))},a.handleSubmit=function(e){e.preventDefault();var t=a.props.createPost,n=a.state;t(n.title,n.author,n.body)},a.state={title:"",author:"",body:""},a}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.history,n=t.isLoadingCreatePost,o=t.error;e.isLoadingCreatePost===n||n||(o?(alert("\u65b0\u589e\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.log(o)):(alert("\u65b0\u589e\u6210\u529f"),a.push("/post")))}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.author,r=e.body;return o.a.createElement(n.Fragment,null,o.a.createElement("form",{className:"blog__addpost",method:"POST"},o.a.createElement("div",{className:"blog__addpost-title"},o.a.createElement("i",{className:"far fa-plus-square"}),"\u65b0\u589e\u6587\u7ae0"),o.a.createElement("div",null,"\u6a19\u984c\uff1a",o.a.createElement("input",{className:"blog__addpost-articletitle",placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",name:"title",value:t,onChange:this.handleInputChange})),o.a.createElement("div",null,"\u4f5c\u8005\uff1a",o.a.createElement("input",{className:"blog__addpost-author",placeholder:"\u8f38\u5165\u4f60\u7684\u5927\u540d",name:"author",value:a,onChange:this.handleInputChange})),o.a.createElement("div",null,"\u5167\u5bb9\uff1a",o.a.createElement("textarea",{className:"blog__addpost-body",placeholder:"\u6587\u7ae0\u5167\u5bb9",name:"body",value:r,onChange:this.handleInputChange})),o.a.createElement("br",null),o.a.createElement("button",{className:"blog__addpost-submit",type:"submit",onClick:this.handleSubmit},"\u9001\u51fa")))}}]),t}(n.Component),x=Object(_.e)(Object(i.b)((function(e){return{isLoadingCreatePost:e.isLoadingCreatePost,error:e.error}}),(function(e){return{createPost:function(t,a,n){e(function(e,t,a){return{type:"CREATE_POST",payload:v(e,t,a)}}(t,a,n))}}}))((function(e){return o.a.createElement(F,e)}))),A=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(h.a,{basename:"Blog-SPA"},o.a.createElement("main",{className:"blog"},o.a.createElement("nav",{className:"blog__nav"},o.a.createElement(h.b,{className:"blog__nav-name",to:"/",exact:"true"},"LYU"),o.a.createElement(h.b,{className:"blog__nav-about",to:"/about",exact:"true"},"About"),o.a.createElement(h.b,{className:"blog__nav-list",to:"/post",exact:"true"},"List"),o.a.createElement(h.b,{className:"blog__nav-addpost",to:"/addpost",exact:"true"},"Add Post")),o.a.createElement(_.a,{exact:!0,path:"/",component:y}),o.a.createElement(_.a,{exact:!0,path:"/post",component:y}),o.a.createElement(_.a,{path:"/about",component:U}),o.a.createElement(_.a,{path:"/post/:postId",render:function(){return o.a.createElement(I,{updataState:e.updateState})}}),o.a.createElement(_.a,{path:"/addpost",component:x})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(L.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={postList:[],post:{},error:"",isLoadingGetPostList:!1,isLoadingGetPost:!1,isLoadingDeletePost:!1,isLoadingCreatePost:!1,isLoadingUpdatePost:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POST_LIST_PENDING":return J({},e,{isLoadingGetPostList:!0});case"GET_POST_LIST_FULFILLED":return J({},e,{isLoadingGetPostList:!1,postList:t.payload.data});case"GET_POST_LIST_REJECTED":return J({},e,{isLoadingGetPostList:!1,error:t.payload});case"GET_POST_PENDING":return J({},e,{isLoadingGetPost:!0,post:{}});case"GET_POST_FULFILLED":return J({},e,{isLoadingGetPost:!1,post:t.payload.data});case"DELETE_POST_PENDING":return J({},e,{isLoadingDeletePost:!0});case"DELETE_POST_FULFILLED":return J({},e,{isLoadingDeletePost:!1});case"DELETE_POST_REJECTED":return J({},e,{isLoadingDeletePost:!1,error:t.payload});case"CREATE_POST_PENDING":return J({},e,{isLoadingCreatePost:!0});case"CREATE_POST_FULFILLED":return J({},e,{isLoadingCreatePost:!1});case"CREATE_POST_REJECTED":return J({},e,{isLoadingCreatePost:!1,error:t.payload});case"UPDATE_POST_PENDING":return J({},e,{isLoadingUpdatePost:!0});case"UPDATE_POST_FULFILLED":return J({},e,{isLoadingUpdatePost:!1});case"UPDATE_POST_REJECTED":return J({},e,{isLoadingUpdatePost:!1,error:t.payload});default:return e}},M=Object(l.c)(q,Object(l.a)(c.a,d.a));s.a.render(o.a.createElement(i.a,{store:M},o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,a){e.exports=a(201)},80:function(e,t,a){},82:function(e,t,a){e.exports=a.p+"static/media/background-image.81b52042.jpg"}},[[71,1,2]]]);
//# sourceMappingURL=main.466d4292.chunk.js.map